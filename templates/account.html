{% extends "base.html" %}

{% block content %}

    <h2>
        {{ username.capitalize() }}'s Account
    </h2>

    <div class="section">
        <div class="section-header row">
            <div class="row">
                <h3 class="light-blue-text text-darken-4 center-align">Tasks Completed Today</h3>
            </div>
            <div class="row">
                <i class='fas fa-caret-down arrow'></i>
            </div>
        </div>
        <div class="section-content row">
            {% if doneTasks|length > 0 %}
                <ul class='task'>    
                    {% for task in doneTasks %}
                        {% if session.user|lower == task.created_by|lower %}
                            {% if task.task_size == 'small' %}
                                <li class='task-card col small'>    
                            {% elif task.task_size == 'medium' %}
                                <li class='task-card col medium'>
                            {% else %}
                                <li class='task-card col large'>
                            {% endif %}
                                <div class='task-header row'>
                                    <div class='row'>
                                        <a href='{{ url_for("done_task", task_id=task._id) }}' class='check-box'>
                                            {% if task.is_done == true %}
                                                <i class='far fa-check-square'></i>
                                            {% else %}
                                                <i class='far fa-square'></i>
                                            {% endif %}
                                        </a>
                                        <div class='task-name'>
                                            <strong>{{ task.task_name }}</strong>
                                        </div>
                                    </div>
                                    <div class='row'>
                                        {% if task.is_priority == true %}
                                        <i class='fas fa-exclamation-circle'></i>
                                        {% endif %}
                                        <i class='fas fa-caret-down arrow'></i>
                                    </div>
                                </div>
                                <div class='task-body col hidden'>
                                    <div class='row info'>
                                        <div class='category'>
                                            {% if task.category_name == '' %}
                                                <p>No Category</p>
                                            {% else %}
                                                {{ task.category_name }}
                                            {% endif %}
                                        </div>
                                    </div>
                                    <div class='row'>
                                        {% if task.task_description != '' %}
                                        <div class='description'>
                                            {{ task.task_description }}
                                        </div>
                                        {% endif %}
                                    </div>
                                    <div class='row info'>
                                        <div class='due-date'>
                                            {% if task.due_date != 'None' %}
                                                <p>Due by: <span class='date'>{{ task.due_date }}</span></p>
                                            {% endif %}
                                        </div>
                                        <div class="task-buttons">
                                            <div class='open-modal'>
                                                <p class="delete-task "><i class='far fa-trash-alt no-pointer'></i></p>
                                            </div>
                                            <!-- The Delete Task Modal -->
                                            <div class="modal-background hidden" data-closer="close">
                                                <!-- Modal content -->
                                                <div class="modal">
                                                    <div class="modal-title">
                                                        <h2>Delete Task<span class="close" data-closer="close">&times;</span></h2>
                                                    </div>
                                                    <div class="modal-content">
                                                        <div class="modal-par">
                                                            <p>Are you sure you want to delete "{{ task.task_name }}"?</p>
                                                        </div>
                                                        <div class="modal-btns">
                                                            <div class="btn m-btn">
                                                                <a href='{{ url_for("delete_task", task_id=task._id) }}'>Yes</a>
                                                            </div>
                                                            <div class="btn m-btn">
                                                                <p class="no-btn" data-closer="close">No</p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class='edit'>
                                                <a href='{{ url_for("edit_task", task_id=task._id) }}'><i class='far fa-edit task-btn'></i></a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            {% endif %}
                    {% endfor %}
                </ul>
            {% else %}
                <h3>No Tasks Found</h3>
            {% endif %}
        </div>
    </div>

    <div class="section">
        <div class="section-header row">
            <div class="row">
                <h3 class="light-blue-text text-darken-4 center-align">To Do Today</h3>
            </div>
            <div class="row">
                <i class='fas fa-caret-down arrow'></i>
            </div>
        </div>
        <div class="section-content row">
            {% if importantTasks|length > 0 %}
                <ul class='task'>    
                    {% for task in importantTasks %}
                        {% if session.user|lower == task.created_by|lower %}
                            {% if task.task_size == 'small' %}
                                <li class='task-card col small'>    
                            {% elif task.task_size == 'medium' %}
                                <li class='task-card col medium'>
                            {% else %}
                                <li class='task-card col large'>
                            {% endif %}
                                <div class='task-header row'>
                                    <div class='row'>
                                        <a href='{{ url_for("done_task", task_id=task._id) }}' class='check-box'>
                                            {% if task.is_done == true %}
                                                <i class='far fa-check-square'></i>
                                            {% else %}
                                                <i class='far fa-square'></i>
                                            {% endif %}
                                        </a>
                                        <div class='task-name'>
                                            <strong>{{ task.task_name }}</strong>
                                        </div>
                                    </div>
                                    <div class='row'>
                                        {% if task.is_priority == true %}
                                        <i class='fas fa-exclamation-circle'></i>
                                        {% endif %}
                                        <i class='fas fa-caret-down arrow'></i>
                                    </div>
                                </div>
                                <div class='task-body col hidden'>
                                    <div class='row info'>
                                        <div class='category'>
                                            {% if task.category_name == '' %}
                                                <p>No Category</p>
                                            {% else %}
                                                {{ task.category_name }}
                                            {% endif %}
                                        </div>
                                    </div>
                                    <div class='row'>
                                        {% if task.task_description != '' %}
                                        <div class='description'>
                                            {{ task.task_description }}
                                        </div>
                                        {% endif %}
                                    </div>
                                    <div class='row info'>
                                        <div class='due-date'>
                                            {% if task.due_date != 'None' %}
                                                <p>Due by: <span class='date'>{{ task.due_date }}</span></p>
                                            {% endif %}
                                        </div>
                                        <div class="task-buttons">
                                            <div class='open-modal'>
                                                <p class="delete-task "><i class='far fa-trash-alt no-pointer'></i></p>
                                            </div>
                                            <!-- The Delete Task Modal -->
                                            <div class="modal-background hidden" data-closer="close">
                                                <!-- Modal content -->
                                                <div class="modal">
                                                    <div class="modal-title">
                                                        <h2>Delete Task<span class="close" data-closer="close">&times;</span></h2>
                                                    </div>
                                                    <div class="modal-content">
                                                        <div class="modal-par">
                                                            <p>Are you sure you want to delete "{{ task.task_name }}"?</p>
                                                        </div>
                                                        <div class="modal-btns">
                                                            <div class="btn m-btn">
                                                                <a href='{{ url_for("delete_task", task_id=task._id) }}'>Yes</a>
                                                            </div>
                                                            <div class="btn m-btn">
                                                                <p class="no-btn" data-closer="close">No</p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class='edit'>
                                                <a href='{{ url_for("edit_task", task_id=task._id) }}'><i class='far fa-edit task-btn'></i></a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            {% endif %}
                    {% endfor %}
                </ul>
            {% else %}
                <h3>No Tasks Found</h3>
            {% endif %}
        </div>
    </div>

    <div class="section">
        <div class="section-header row">
            <div class="row">
                <h3 class="light-blue-text text-darken-4 center-align">Other Tasks</h3>
            </div>
            <div class="row">
                <i class='fas fa-caret-down arrow'></i>
            </div>
        </div>
        <div class="section-content row">
            {% if otherTasks|length > 0 %}
                <ul class='task'>    
                    {% for task in otherTasks %}
                        {% if session.user|lower == task.created_by|lower %}
                            {% if task.task_size == 'small' %}
                                <li class='task-card col small'>    
                            {% elif task.task_size == 'medium' %}
                                <li class='task-card col medium'>
                            {% else %}
                                <li class='task-card col large'>
                            {% endif %}
                                <div class='task-header row'>
                                    <div class='row'>
                                        <a href='{{ url_for("done_task", task_id=task._id) }}' class='check-box'>
                                            {% if task.is_done == true %}
                                                <i class='far fa-check-square'></i>
                                            {% else %}
                                                <i class='far fa-square'></i>
                                            {% endif %}
                                        </a>
                                        <div class='task-name'>
                                            <strong>{{ task.task_name }}</strong>
                                        </div>
                                    </div>
                                    <div class='row'>
                                        {% if task.is_priority == true %}
                                        <i class='fas fa-exclamation-circle'></i>
                                        {% endif %}
                                        <i class='fas fa-caret-down arrow'></i>
                                    </div>
                                </div>
                                <div class='task-body col hidden'>
                                    <div class='row info'>
                                        <div class='category'>
                                            {% if task.category_name == '' %}
                                                <p>No Category</p>
                                            {% else %}
                                                {{ task.category_name }}
                                            {% endif %}
                                        </div>
                                    </div>
                                    <div class='row'>
                                        {% if task.task_description != '' %}
                                        <div class='description'>
                                            {{ task.task_description }}
                                        </div>
                                        {% endif %}
                                    </div>
                                    <div class='row info'>
                                        <div class='due-date'>
                                            {% if task.due_date != 'None' %}
                                                <p>Due by: <span class='date'>{{ task.due_date }}</span></p>
                                            {% endif %}
                                        </div>
                                        <div class="task-buttons">
                                            <div class='open-modal'>
                                                <p class="delete-task "><i class='far fa-trash-alt no-pointer'></i></p>
                                            </div>
                                            <!-- The Delete Task Modal -->
                                            <div class="modal-background hidden" data-closer="close">
                                                <!-- Modal content -->
                                                <div class="modal">
                                                    <div class="modal-title">
                                                        <h2>Delete Task<span class="close" data-closer="close">&times;</span></h2>
                                                    </div>
                                                    <div class="modal-content">
                                                        <div class="modal-par">
                                                            <p>Are you sure you want to delete "{{ task.task_name }}"?</p>
                                                        </div>
                                                        <div class="modal-btns">
                                                            <div class="btn m-btn">
                                                                <a href='{{ url_for("delete_task", task_id=task._id) }}'>Yes</a>
                                                            </div>
                                                            <div class="btn m-btn">
                                                                <p class="no-btn" data-closer="close">No</p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class='edit'>
                                                <a href='{{ url_for("edit_task", task_id=task._id) }}'><i class='far fa-edit task-btn'></i></a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            {% endif %}
                    {% endfor %}
                </ul>
            {% else %}
                <h3>No Tasks Found</h3>
            {% endif %}
        </div>
    </div>

    <div class="section">
        <div class="section-header row">
            <div class="row">
                <h3 class="light-blue-text text-darken-4 center-align">Manage Categories</h3>
            </div>
            <div class="row">
                <i class='fas fa-caret-down arrow'></i>
            </div>
        </div>
        <div class="section-content row">
            <div class="all-cats">
                {% for category in categories %}
                    <div class="categories">
                        <div class="cat-card">
                            <div class="card">
                                <span class="card-title">{{ category.category_name }}</span>
                            </div>
                            <div class="card-action">
                                <a href='{{ url_for("edit_category", category_id=category._id) }}'><i class='far fa-edit task-btn'></i></a>
                                <div class="open-modal">
                                    <p class="delete-icon "><i class='far fa-trash-alt no-pointer'></i></p>
                                </div>
                                <!-- The Delete category Modal -->
                                <div class="modal-background hidden" data-closer="close">
                                    <!-- Modal content -->
                                    <div class="modal">
                                        <div class="modal-title">
                                            <h2>Delete category<span class="close" data-closer="close">&times;</span></h2>
                                        </div>
                                        <div class="modal-content">
                                            <div class="modal-par">
                                                <p>Are you sure you want to delete "{{ category.category_name }}"?</p>
                                            </div>
                                            <div class="modal-btns">
                                                <div class="btn m-btn">
                                                    <a href='{{ url_for("delete_category", category_id=category._id) }}'>Yes</a>
                                                </div>
                                                <div class="btn m-btn">
                                                    <p class="no-btn" data-closer="close">No</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>

{% endblock %}