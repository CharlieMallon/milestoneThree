{% extends "base.html" %}

{% block content %}

    <!-- If not logged in show this screen -->
    {% if  not session.user %}
        <h3>Log In Silly</h3>
    {% endif %}
    
    <!-- List out the tasks -->
    {% if tasks|length > 0 %}
        <ul class="task">    
            {% for task in tasks %}
                {% if session.user|lower == task.created_by|lower %}
                    {% if task.task_size == "small" %}
                        <li class="task-card col small">    
                    {% elif task.task_size == "medium" %}
                        <li class="task-card col medium">
                    {% else %}
                        <li class="task-card col large">
                    {% endif %}
                        <div class="task-header row">
                            <div class="row">
                                <a href="{{ url_for('done_task', task_id=task._id) }}" class="check-box">
                                    {% if task.is_done == true %}
                                        <i class="far fa-check-square"></i>
                                    {% else %}
                                        <i class="far fa-square"></i>
                                    {% endif %}
                                </a>
                                <div class="task-name">
                                    <strong>{{ task.task_name }}</strong>
                                </div>
                            </div>
                            <div class="row">
                                {% if task.is_priority == true %}
                                <i class="fas fa-exclamation-circle"></i>
                                {% endif %}
                                <i class="fas fa-caret-down arrow"></i>
                            </div>
                        </div>
                        <div class="task-body col hidden">
                            <div class="row info">
                                <div class="category">
                                    {% if task.category_name == "" %}
                                        <p>No Category</p>
                                    {% else %}
                                        {{ task.category_name }}
                                    {% endif %}
                                </div>
                            </div>
                            <div class="row">
                                {% if task.task_description != "" %}
                                <div class="description">
                                    {{ task.task_description }}
                                </div>
                                {% endif %}
                            </div>
                            <div class="row info">
                                <div class="due-date">
                                    {% if task.due_date != "None" %}
                                        <p>Due by: <span class="date">{{ task.due_date }}</span></p>
                                    {% endif %}
                                </div>
                                <div class="delete">
                                    <a href="{{ url_for('delete_task', task_id=task._id) }}"><i class="far fa-trash-alt"></i></a>
                                </div>
                                <div class="edit">
                                    <a href="{{ url_for('edit_task', task_id=task._id) }}"><i class="far fa-edit"></i></a>
                                </div>
                            </div>
                        </div>
                    </li>
                    {% endif %}
            {% endfor %}
        </ul>
    {% else %}
        <h3>No To Do's found</h3>
    {% endif %}

    {% endblock %}